/*!
 * Response   Responsive design toolkit
 * @link      http://responsejs.com
 * @author    Ryan Van Etten (c) 2011-2012
 * @license   MIT
 * @version   0.7.3
 * @requires  jQuery 1.7+
 *            -or- Jeesh (ender.no.de/#jeesh)
 *            -or- elo (github.com/ryanve/elo)
 *            -or- zepto 0.8+ (zeptojs.com)
 */
/*jslint browser: true, devel: true, node: true, passfail: false, bitwise: true
, continue: true, debug: true, eqeq: true, es5: true, forin: true, newcap: true
, nomen: true, plusplus: true, regexp: true, undef: true, sloppy: true, stupid: true
, sub: true, white: true, indent: 4, maxerr: 180 */
(function(e,t,n){var r=e.jQuery||e.Zepto||e.ender||e.elo;typeof module!="undefined"&&module.exports?module.exports=n(r):e[t]=n(r)})(this,"Response",function(e){function U(){return a.clientWidth}function z(){return a.clientHeight}function W(e){throw new TypeError(e?r+"."+e:r)}function X(e){return typeof e=="number"&&e===e}function V(e){return typeof e=="string"?K(e.split(" ")):h(e)?K(e):[]}function $(e,t,n){if(null==e)return e;var r=0,i=e.length;while(r<i)t.call(n||e[r],e[r],r++,e);return e}function J(e,t,n){var r=[],i=e.length,s=0,o;t=t||"",n=n||"";while(s<i)o=e[s++],null==o||r.push(t+o+n);return r}function K(e,t,n){var r,i=0,s=0,o,u=[],a,f=typeof t=="function";if(!e)return u;n=(a=!0===n)?null:n;for(r=e.length;s<r;s++)o=e[s],a===(f?!t.call(n,o,s,e):t?typeof o!==t:!o)&&(u[i++]=o);return u}function Q(e,t){if(!e||!t)return e;var n,r=t.length;if(typeof t!="function"&&X(r)){for(n=0;n<r;n++)void 0===t[n]||(e[n]=t[n]);e.length>n||(e.length=n)}else for(n in t)p.call(t,n)&&void 0!==t[n]&&(e[n]=t[n]);return e}function G(e,t,n){return null==e?e:(typeof e=="object"&&!e.nodeType&&X(e.length)?$(e,t,n):t.call(n||e,e),e)}function Y(e){return function(t,n){var r,i=e();return r=i>=(t||0),n?r&&i<=n:r}}function Z(e){var t=o.devicePixelRatio;return null==e?t||(Z(2)?2:Z(1.5)?1.5:Z(1)?1:0):isFinite(e)?t&&t>0?t>=e:(e="only all and (min--moz-device-pixel-ratio:"+e+")",F(e).matches?!0:!!F(e.replace("-moz-","")).matches):!1}function et(e){return e.replace(j,"$1").replace(B,function(e,t){return t.toUpperCase()})}function tt(e){return"data-"+(e?e.replace(j,"$1").replace(H,"$1-$2").toLowerCase():e)}function nt(e){var t;return!e||typeof e!="string"?e:"true"===e?!0:"false"===e?!1:"undefined"===e?t:"null"===e?null:(t=parseFloat(e))===+t?t:e}function rt(e){return e?e.nodeType===1?e:e[0]&&e[0].nodeType===1?e[0]:!1:!1}function it(e,t){var n=arguments.length,r=rt(this),i={},s=!1,o;if(n){h(e)&&(s=!0,e=e[0]);if(typeof e=="string"){e=tt(e);if(1===n)return i=r.getAttribute(e),s?nt(i):i;if(this===r||2>(o=this.length||1))r.setAttribute(e,t);else while(o--)o in this&&it.apply(this[o],arguments)}else if(e instanceof Object)for(o in e)e.hasOwnProperty(o)&&it.call(this,o,e[o]);return this}return r.dataset&&DOMStringMap?r.dataset:($(r.attributes,function(e){e&&(o=String(e.name).match(j))&&(i[et(o[1])]=e.value)}),i)}function st(e){return this&&typeof e=="string"&&(e=V(e),G(this,function(t){$(e,function(e){e&&t.removeAttribute(tt(e))})})),this}function ot(e,t,n){return it.apply(e,d.call(arguments,1))}function ut(e,t){return st.call(e,t)}function at(e){var t,n=[],r=0,i=e.length;while(r<i)(t=e[r++])&&n.push("["+tt(t.replace(P,"").replace(".","\\."))+"]");return n.join()}function ft(t){return e(at(V(t)))}function lt(){return window.pageXOffset||a.scrollLeft}function ct(){return window.pageYOffset||a.scrollTop}function ht(e,t){var n=e.getBoundingClientRect?e.getBoundingClientRect():{};return t=typeof t=="number"?t||0:0,{top:(n.top||0)-t,left:(n.left||0)-t,bottom:(n.bottom||0)+t,right:(n.right||0)+t}}function pt(e,t){var n=ht(rt(e),t);return!!n&&n.right>=0&&n.left<=U()}function dt(e,t){var n=ht(rt(e),t);return!!n&&n.bottom>=0&&n.top<=z()}function vt(e,t){var n=ht(rt(e),t);return!!n&&n.bottom>=0&&n.top<=z()&&n.right>=0&&n.left<=U()}function mt(e){var t={img:1,input:1,source:3,embed:3,track:3,iframe:5,audio:5,video:5,script:5},n=t[e.tagName.toLowerCase()]||-1;return 4>n?n:typeof e.getAttribute("src")=="string"?5:-5}function gt(e,t,r){var i;return(!e||null==t)&&W("store"),r=typeof r=="string"&&r,G(e,function(e){r?i=e.getAttribute(r):0<mt(e)?i=e.getAttribute("src"):i=e.innerHTML,null==i?ut(e,t):ot(e,t,i)}),n}function yt(e,t){var n=[];return e&&t&&$(V(t),function(t,r){n.push(ot(e,t))},e),n}function bt(e,t){return typeof e=="string"&&typeof t=="function"&&(x[e]=t,T[e]=1),n}function wt(e){return l.on("resize",e),n}function Et(e,t){var r,i,s=R.crossover;return typeof e=="function"&&(r=t,t=e,e=r),i=e?""+e+s:s,l.on(i,t),n}function St(e){return G(e,function(e){f(e),wt(e)}),n}function xt(e){return G(e,function(e){typeof e=="object"||W("create @args");var t=I(b).configure(e),n,r=t.verge,i=t.breakpoints,s=q("scroll"),o=q("resize");if(!i.length)return;n=i[0]||i[1]||!1,f(function(){function u(){t.reset(),$(t.$e,function(e,n){t[n].decideValue().updateDOM()}).trigger(e)}function a(){$(t.$e,function(e,n){vt(t[n].$e,r)&&t[n].updateDOM()})}var e=R.allLoaded,i=!!t.lazy;$(t.target().$e,function(e,n){t[n]=I(t).prepareData(e),(!i||vt(t[n].$e,r))&&t[n].updateDOM()}),t.dynamic&&(t.custom||n<A)&&wt(u,o);if(!i)return;l.on(s,a),t.$e.one(e,function(){l.off(s,a)})})}),n}function Tt(e){return t[r]===n&&(t[r]=i),typeof e=="function"&&e.call(t,n),n}function Nt(e,t,r){$(["inX","inY","inViewport"],function(i){(r||!t[i])&&(t[i]=function(t,r){return e(K(this,function(e){return!!e&&!r===n[i](e,t)}))})})}function Ct(e,t){if(typeof e=="function"&&e.fn){if(t||void 0===e.fn.dataset)e.fn.dataset=it;if(t||void 0===e.fn.deletes)e.fn.deletes=st;Nt(e,e.fn,t)}return n}function kt(t,n){return t=arguments.length?t:e,Ct(t,n)}if(typeof e!="function")throw"Response unable to run due to missing dep.";var t=this,n,r="Response",i=t[r],s="init"+r,o=window,u=document,a=u.documentElement,f=e.domReady||e,l=e(o),c=o.screen,h=Array.isArray||function(e){return e instanceof Array},p={}.hasOwnProperty,d=[].slice,v=[].concat,m=[].map,g=m?function(e,t,n){return m.call(e,t,n)}:function(e,t,n){var r,i=e.length,s=[];for(r=0;r<i;r++)r in e&&(s[r]=t.call(n,e[r],r,e));return s},y={width:[0,320,481,641,961,1025,1281],height:[0,481],ratio:[1,1.5,2]},b,w,E,S={},x={},T={},N={all:[]},C=1,k=c.width,L=c.height,A=k>L?k:L,O=k+L-A,M=function(){return k},_=function(){return L},D=/[^a-z0-9_\-\.]/gi,P=/^[\W\s]+|[\W\s]+$|/g,H=/([a-z])([A-Z])/g,B=/-(.)/g,j=/^data-(.+)$/,F=o.matchMedia||o.msMatchMedia||Object,I=Object.create||function(e){function t(){}return t.prototype=e,new t},q=function(e,t){return t=t||r,e.replace(P,"")+"."+t.replace(P,"")},R={allLoaded:q("allLoaded"),crossover:q("crossover")};return w=Y(U),E=Y(z),S.band=Y(M),S.wave=Y(_),b=function(){function r(e){return typeof e=="string"?e.toLowerCase().replace(D,""):""}var t=R.crossover,n=Math.min;return{$e:0,mode:0,breakpoints:null,prefix:null,prop:"width",keys:[],dynamic:null,custom:0,values:[],fn:0,verge:null,newValue:0,currValue:1,aka:null,lazy:null,i:0,uid:null,reset:function(){var e=this.breakpoints,n=e.length,r=0;while(!r&&n--)this.fn(e[n])&&(r=n);return r!==this.i&&(l.trigger(t).trigger(this.prop+t),this.i=r||0),this},configure:function(e){Q(this,e);var t,i,s,o,u=!0,a,f=this.prop;this.uid=C++,this.verge=isFinite(this.verge)?this.verge:n(A,500),this.fn=x[f]||W("create @fn"),typeof this.dynamic!="boolean"&&(this.dynamic="device"!==f.substring(0,6)),this.custom=T[f],i=this.prefix?K(g(V(this.prefix),r)):["min-"+f+"-"],s=1<i.length?i.slice(1):0,this.prefix=i[0],a=this.breakpoints,h(a)?($(a,function(e){if(!e&&e!==0)throw"invalid breakpoint";u=u&&isFinite(e)}),a=u?a.sort(function(e,t){return e-t}):a,a.length||W("create @breakpoints")):a=y[f]||y[f.split("-").pop()]||W("create @prop"),this.breakpoints=u?K(a,function(e){return e<=A}):a,this.keys=J(this.breakpoints,this.prefix),this.aka=null;if(s){o=[],t=s.length;while(t--)o.push(J(this.breakpoints,s[t]));this.aka=o,this.keys=v.apply(this.keys,o)}return N.all=N.all.concat(N[this.uid]=this.keys),this},target:function(){return this.$e=e(at(N[this.uid])),gt(this.$e,s),this.keys.push(s),this},decideValue:function(){var e=null,t=this.breakpoints,n=t.length,r=n;while(e==null&&r--)this.fn(t[r])&&(e=this.values[r]);return this.newValue=typeof e=="string"?e:this.values[n],this},prepareData:function(t){this.$e=e(t),this.mode=mt(t),this.values=yt(this.$e,this.keys);if(this.aka){var n=this.aka.length;while(n--)this.values=Q(this.values,yt(this.$e,this.aka[n]))}return this.decideValue()},updateDOM:function(){return this.currValue===this.newValue?this:(this.currValue=this.newValue,0<this.mode?this.$e[0].setAttribute("src",this.newValue):null==this.newValue?this.$e.empty&&this.$e.empty():this.$e.html?this.$e.html(this.newValue):(this.$e.empty&&this.$e.empty(),this.$e[0].innerHTML=this.newValue),this)}}}(),x.width=w,x.height=E,x["device-width"]=S.band,x["device-height"]=S.wave,x["device-pixel-ratio"]=Z,n={deviceMin:function(){return O},deviceMax:function(){return A},noConflict:Tt,chain:kt,bridge:Ct,create:xt,addTest:bt,datatize:tt,camelize:et,render:nt,store:gt,access:yt,target:ft,object:I,crossover:Et,action:St,resize:wt,ready:f,affix:J,sift:K,dpr:Z,deletes:ut,scrollX:lt,scrollY:ct,deviceW:M,deviceH:_,device:S,inX:pt,inY:dt,route:G,merge:Q,media:F,wave:E,band:w,map:g,each:$,inViewport:vt,dataset:ot,viewportH:z,viewportW:U},f(function(){var t,n=ot(u.body,"responsejs");n&&(t=!!o.JSON&&JSON.parse,t?n=t(n):e.parseJSON&&(n=e.parseJSON(n)),n&&n.create&&xt(n.create)),a.className=a.className.replace(/(^|\s)(no-)?responsejs(\s|$)/,"$1$3")+" responsejs "}),n});